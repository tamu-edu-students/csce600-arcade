<%= render "shared/all_pages_nav" %>

<button id="myBtn" title="Settings" class="btn btn-login"><i class="fas fa-cog"></i></button>

<div id="myModal" class="modal">

  <div class="modal-content">
    <span class="close">&times;</span>

    <!-- Manage Active Roles Section -->
    <div id="manageActiveRoles" class="modal-section">
      <h3 class="section-title">Manage Active Roles</h3>
      <div class="role-settings">
        <span class="label">Check to activate</span>
        <div class="roles-container">
          <% Role.where(user_id: session[:user_id]).each do |role| %>
            <% if !role.role.include?("Member") %>
              <div class="role-item">
                <%= check_box_tag "settings[active_roles][]", role.game.present? ? role.role + "-" + role.game.name : role.role, SettingsService.role_exists?(@current_user, role.role, role.game), class: "role-checkbox" %>
                <%= label_tag "settings[active_roles][]", role.role, class: "role-label" %>
                <% if ["Puzzle Setter", "Puzzle Aesthetician"].include?(role.role) && role.game.present? %>
                  <span class="game-name">for <%= role.game.name %></span>
                <% end %>
              </div>
            <% end %>
          <% end %>
        </div>
        <button class="save-button" onclick="updateActiveRoles()" title="Save">
          <i class="fa fa-save save-icon"></i>
        </button>
      </div>
    </div>

    <!-- Game Settings Section -->
    <div id="gameSettings" class="modal-section">
      <h3 class="section-title">Game Settings</h3>
      <div class="setting-item">
        <span class="label">Toggle Game Casing</span>
        <button class="toggle-button" onclick="changeGameCasing()">
          <i id="gameCasing" class="fa fa-arrow-circle-up toggle-icon"></i>
        </button>
      </div>
    </div>

    <!-- Site Settings Section -->
    <div id="siteSettings" class="modal-section">
      <h3 class="section-title">Site Settings</h3>
      <div class="setting-item">
        <span class="label">Adjust Contrast</span>
        <div class="contrast-controls">
          <button class="contrast-button minus" onclick="stepContrast(-1)" title="Decrease">
            <i class="fas fa-minus"></i>
          </button>
          <input id="contrastInput" type="number" min="0" step="1" class="contrast-input" onchange="changeContrast()">
          <button class="contrast-button plus" onclick="stepContrast(1)" title="Increase">
            <i class="fas fa-plus"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
